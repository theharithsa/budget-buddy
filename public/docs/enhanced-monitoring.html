<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Dynatrace Monitoring -->
    <script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/18b1df4492a/bf12470wrz/97ae64e6fe2c5972_complete.js" crossorigin="anonymous"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Dynatrace Monitoring - FinBuddy</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@200;300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Titillium Web', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); }
        .code-block {
            background: #0d1117;
            color: #e6edf3;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: 'Fira Code', 'JetBrains Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
            overflow-x: auto;
            border: 1px solid #30363d;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            position: relative;
        }
        .code-block::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #58a6ff 0%, #7c3aed 50%, #f85149 100%);
            border-radius: 8px 8px 0 0;
        }
        .feature-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .badge-enhanced { background: linear-gradient(135deg, #60a5fa 0%, #a855f7 100%); color: white; }
        .badge-xhr { background: #ef4444; color: white; }
        .badge-load { background: #10b981; color: white; }
        .badge-biz { background: #f59e0b; color: white; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="gradient-bg text-white">
        <div class="container mx-auto px-4 py-12">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-5xl font-bold mb-4">Enhanced Dynatrace Monitoring</h1>
                <p class="text-xl opacity-90 mb-6">XHR vs Load Action Differentiation with BizEvent Integration</p>
                <div class="flex justify-center space-x-4">
                    <span class="badge badge-enhanced">Enhanced Tracking</span>
                    <span class="badge badge-xhr">XHR Actions</span>
                    <span class="badge badge-load">Load Actions</span>
                    <span class="badge badge-biz">BizEvents</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-12">
        <div class="max-w-6xl mx-auto">

            <!-- Overview -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6">üéØ Implementation Overview</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="feature-card bg-white p-6 rounded-lg shadow-md border border-red-200">
                        <div class="text-red-600 text-2xl mb-4">üåê</div>
                        <h3 class="text-xl font-semibold mb-2">XHR Actions</h3>
                        <p class="text-gray-600">Network operations like Firebase calls, AI API requests, and file uploads tracked with proper error handling</p>
                    </div>
                    <div class="feature-card bg-white p-6 rounded-lg shadow-md border border-green-200">
                        <div class="text-green-600 text-2xl mb-4">üëÜ</div>
                        <h3 class="text-xl font-semibold mb-2">Load Actions</h3>
                        <p class="text-gray-600">UI interactions like button clicks, form submissions, and navigation events</p>
                    </div>
                    <div class="feature-card bg-white p-6 rounded-lg shadow-md border border-yellow-200">
                        <div class="text-yellow-600 text-2xl mb-4">üìä</div>
                        <h3 class="text-xl font-semibold mb-2">BizEvents</h3>
                        <p class="text-gray-600">Business intelligence events for financial transactions, AI operations, and user journeys</p>
                    </div>
                </div>
            </section>

            <!-- Demo Component Explanation -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6">üß™ Demo Component Features</h2>
                <div class="bg-white rounded-lg shadow-md p-8 border-l-4 border-blue-500">
                    <p class="text-lg mb-6">The <code class="bg-gray-100 px-2 py-1 rounded">DynatraceMonitoringDemo</code> component demonstrates all enhanced monitoring features in action:</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-lg mb-3 text-red-600">XHR Action Tracking</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li>‚Ä¢ Simulated Firebase expense creation</li>
                                <li>‚Ä¢ Automatic error handling and retry logic</li>
                                <li>‚Ä¢ Response time measurement</li>
                                <li>‚Ä¢ Network failure simulation (20% chance)</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg mb-3 text-green-600">Load Action Tracking</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li>‚Ä¢ Form field interactions</li>
                                <li>‚Ä¢ Button clicks with context</li>
                                <li>‚Ä¢ Form reset operations</li>
                                <li>‚Ä¢ Page and component tracking</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mt-6">
                        <h4 class="font-semibold text-lg mb-3 text-yellow-600">BizEvent Generation</h4>
                        <ul class="space-y-2 text-gray-700">
                            <li>‚Ä¢ <code>com.finbuddy.financial.event</code> - Expense creation events</li>
                            <li>‚Ä¢ <code>com.finbuddy.user.journey</code> - User interaction milestones</li>
                            <li>‚Ä¢ <code>com.finbuddy.error</code> - Application error events</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- How to Use the Demo -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6">üìã How to Test the Demo</h2>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                    <ol class="space-y-4 text-lg">
                        <li class="flex items-start">
                            <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5">1</span>
                            <span>Open your browser's Developer Tools (F12) and navigate to the Network tab</span>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5">2</span>
                            <span>Fill in the Amount (e.g., "25.50") and Category (e.g., "Food") fields</span>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5">3</span>
                            <span>Click "Create Demo Expense (XHR Action)" - this triggers an XHR action with simulated Firebase operation</span>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5">4</span>
                            <span>Watch the Console for detailed monitoring logs and toast notifications</span>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5">5</span>
                            <span>Try the "Reset" button to see Load action tracking in action</span>
                        </li>
                    </ol>
                </div>
            </section>

            <!-- Technical Implementation -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6">üîß Technical Implementation</h2>
                
                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-4">User Identification</h3>
                    <div class="code-block">
<pre><code>// Automatic user identification when Firebase auth completes
if (user.email) {
  dynatraceMonitor.setUserContext(user.uid, {
    email: user.email,
    displayName: user.displayName,
    provider: user.providerData[0]?.providerId,
    emailVerified: user.emailVerified
  });
}

// This calls dtrum.identifyUser(user.email) internally
// Dynatrace will now track all actions for this specific user</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-4">XHR Action Pattern</h3>
                    <div class="code-block">
<pre><code>// Enhanced XHR tracking with comprehensive error handling
const result = await trackXhrOperation(
  'Demo Expense Creation',
  'https://firestore.googleapis.com/v1/projects/finbuddy/databases/(default)/documents/expenses',
  async () => {
    // Simulate Firebase operation with potential failure
    await new Promise(resolve => setTimeout(resolve, Math.random() * 2000 + 1000));
    
    if (Math.random() < 0.2) {
      throw new Error('Simulated Firebase timeout');
    }

    return {
      id: `demo_${Date.now()}`,
      amount: parseFloat(amount),
      category,
      success: true
    };
  }
);</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-4">BizEvent Integration</h3>
                    <div class="code-block">
<pre><code>// Automatic BizEvent generation for business operations
trackExpense('create', {
  amount: parseFloat(amount),
  category,
  demoMode: true
});

// Sends: com.finbuddy.financial.event with structured data
{
  "event.name": "Expense Created",
  "operation": "create",
  "amount": 25.50,
  "category": "Food",
  "timestamp": 1725552000000
}</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-4">Error Handling</h3>
                    <div class="code-block">
<pre><code>// Comprehensive error tracking with context
} catch (error) {
  // Enhanced error tracking with context
  trackComponentError(error as Error, {
    operation: 'simulateExpenseCreation',
    formData: { amount, category },
    timestamp: new Date().toISOString()
  });

  // BizEvent for failed operations
  trackFinancialEvent('Demo Expense Creation Failed', parseFloat(amount), category);
  
  toast.error(`Failed to create demo expense: ${error.message}`);
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- What Gets Tracked -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6">üìä What Gets Tracked</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-xl font-semibold mb-4 text-purple-600">Dynatrace Actions</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li>‚Ä¢ <strong>XHR:</strong> Network operations with timing</li>
                            <li>‚Ä¢ <strong>Load:</strong> UI interactions and navigation</li>
                            <li>‚Ä¢ <strong>Properties:</strong> Custom metadata and context</li>
                            <li>‚Ä¢ <strong>Errors:</strong> Failed operations with stack traces</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-xl font-semibold mb-4 text-orange-600">Business Intelligence</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li>‚Ä¢ <strong>Financial Events:</strong> Transaction amounts and categories</li>
                            <li>‚Ä¢ <strong>User Journey:</strong> Page visits and milestones</li>
                            <li>‚Ä¢ <strong>AI Operations:</strong> Response times and success rates</li>
                            <li>‚Ä¢ <strong>Error Analytics:</strong> Failure patterns and contexts</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Console Output Example -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6">üñ•Ô∏è Expected Console Output</h2>
                <div class="bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm">
                    <div class="mb-2">üöÄ User Journey: Page Visit: Monitoring Demo</div>
                    <div class="mb-2">üöÄ User Journey: Component Mount: MonitoringDemo</div>
                    <div class="mb-2">üîÑ Starting XHR Action: Demo Expense Creation</div>
                    <div class="mb-2">üí∞ Expense create: {amount: 25.5, category: "Food", demoMode: true}</div>
                    <div class="mb-2">üíº Financial Event: Demo Expense Added - $25.5 (Food)</div>
                    <div class="mb-2">üöÄ User Journey: Demo Expense Creation Success</div>
                    <div class="mb-2">üìä BizEvent sent: com.finbuddy.financial.event</div>
                    <div class="text-yellow-400">‚úÖ Demo expense of $25.5 added successfully!</div>
                </div>
            </section>

            <!-- Integration with FinBuddy -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold mb-6">üîó Integration with FinBuddy</h2>
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6">
                    <p class="text-lg mb-4">This enhanced monitoring is already integrated throughout FinBuddy:</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold mb-2">üî• Firebase Operations</h4>
                            <ul class="text-gray-700 space-y-1">
                                <li>‚Ä¢ Expense CRUD operations</li>
                                <li>‚Ä¢ Budget management</li>
                                <li>‚Ä¢ File uploads (receipts)</li>
                                <li>‚Ä¢ Authentication flow</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">ü§ñ AI Operations</h4>
                            <ul class="text-gray-700 space-y-1">
                                <li>‚Ä¢ KautilyaAI Co-Pilot interactions</li>
                                <li>‚Ä¢ Gemini 2.0 Flash API calls</li>
                                <li>‚Ä¢ Response time tracking</li>
                                <li>‚Ä¢ Error rate monitoring</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Try It Now -->
            <section class="mb-12">
                <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg p-8 text-center">
                    <h2 class="text-3xl font-bold mb-4">üéØ Try It Now!</h2>
                    <p class="text-xl mb-6">Experience the enhanced monitoring in action</p>
                    <div class="text-sm opacity-90">
                        Navigate to any page in FinBuddy and add the <code>&lt;DynatraceMonitoringDemo /&gt;</code> component to see all monitoring features working together.
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">Enhanced Dynatrace Monitoring for FinBuddy</p>
            <p class="text-gray-400 text-sm">XHR vs Load Action Differentiation ‚Ä¢ BizEvent Integration ‚Ä¢ Comprehensive Error Handling</p>
        </div>
    </footer>
</body>
</html>
