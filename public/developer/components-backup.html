<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Components - FinBuddy Developer Docs</title>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Titillium Web', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            color: #000;
            background: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 3px solid #000;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #000;
        }

        .back-btn {
            background: #000;
            color: #fff;
            padding: 0.8rem 1.5rem;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid #000;
        }

        .back-btn:hover {
            background: #fff;
            color: #000;
            box-shadow: 4px 4px 0 #000;
            transform: translate(-2px, -2px);
        }

        .section {
            margin: 3rem 0;
            padding: 2rem;
            border: 2px solid #000;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .section h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #000;
        }

        .section h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 2rem 0 1rem 0;
            color: #000;
        }

        .code-block {
            background: #000;
            color: #fff;
            padding: 1.5rem;
            border-radius: 6px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            border: 2px solid #333;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .component-card {
            background: #fff;
            border: 2px solid #000;
            padding: 1.5rem;
            border-radius: 6px;
        }

        .component-card h4 {
            font-weight: 700;
            margin-bottom: 1rem;
            color: #000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .component-tag {
            background: #000;
            color: #fff;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .beta-tag {
            background: #007bff;
        }

        .core-tag {
            background: #28a745;
        }

        .ui-tag {
            background: #6c757d;
        }

        .component-tree {
            font-family: 'Courier New', monospace;
            background: #f0f0f0;
            padding: 1.5rem;
            border: 2px solid #000;
            border-radius: 6px;
            margin: 1rem 0;
            overflow-x: auto;
        }

        .feature-list {
            list-style: none;
            margin: 1rem 0;
        }

        .feature-list li {
            padding: 0.3rem 0;
            position: relative;
            padding-left: 1.5rem;
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .component-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Component Library</h1>
            <a href="index.html" class="back-btn">‚Üê Back to Docs</a>
        </div>

        <!-- Overview -->
        <section class="section">
            <h2>üß© Component Architecture</h2>
            <p>FinBuddy uses a modular component architecture with Radix UI primitives, custom feature components, and specialized analytics components.</p>
            
            <div class="component-tree">
App.tsx (Main Application)
‚îú‚îÄ‚îÄ Navigation.tsx (Sidebar Navigation)
‚îú‚îÄ‚îÄ AppHeader.tsx (Top Header)
‚îú‚îÄ‚îÄ Dashboard.tsx (Analytics Dashboard)
‚îÇ   ‚îú‚îÄ‚îÄ analytics/AdvancedCharts.tsx
‚îÇ   ‚îú‚îÄ‚îÄ analytics/GamificationSystem.tsx
‚îÇ   ‚îî‚îÄ‚îÄ analytics/SpendingBehaviorInsights.tsx
‚îú‚îÄ‚îÄ MetricsExplorer.tsx (BETA Analytics)
‚îÇ   ‚îî‚îÄ‚îÄ MetricsBuilder.tsx (Query Builder)
‚îú‚îÄ‚îÄ AIChatPage.tsx (KautilyaAI Co-Pilot)
‚îú‚îÄ‚îÄ BudgetManager.tsx
‚îú‚îÄ‚îÄ CategoryManager.tsx
‚îú‚îÄ‚îÄ PeopleManager.tsx
‚îú‚îÄ‚îÄ AddExpenseModal.tsx
‚îú‚îÄ‚îÄ EditExpenseModal.tsx
‚îú‚îÄ‚îÄ TimeframePicker.tsx
‚îú‚îÄ‚îÄ PWAComponents.tsx
‚îî‚îÄ‚îÄ ui/ (Radix UI Components)
    ‚îú‚îÄ‚îÄ Button.tsx
    ‚îú‚îÄ‚îÄ Dialog.tsx
    ‚îú‚îÄ‚îÄ Select.tsx
    ‚îú‚îÄ‚îÄ DatePicker.tsx
    ‚îî‚îÄ‚îÄ ...
            </div>
        </section>

        <!-- Core Components -->
        <section class="section">
            <h2>üîß Core Components</h2>
            
            <div class="component-grid">
                <div class="component-card">
                    <h4>
                        App.tsx
                        <span class="component-tag core-tag">CORE</span>
                    </h4>
                    <p>Main application orchestrator with tab navigation, state management, and component rendering.</p>
                    
                    <h5>Key Features:</h5>
                    <ul class="feature-list">
                        <li>Tab-based navigation system</li>
                        <li>Global state management</li>
                        <li>Filter and search functionality</li>
                        <li>View mode persistence (list/grid)</li>
                        <li>Authentication integration</li>
                    </ul>

                    <h5>State Interface:</h5>
                    <div class="code-block">
                                            <pre><code>interface AppState {
  activeTab: string;
  viewMode: 'list' | 'grid';
  searchTerm: string;
  categoryFilter: string;
  peopleFilter: string;
  timeframe: DateRange;
}</code></pre>
                    </div>
                </div>

                <div class="component-card">
                    <h4>
                        Dashboard.tsx
                        <span class="component-tag core-tag">CORE</span>
                    </h4>
                    <p>Advanced dashboard with ApexCharts integration and comprehensive financial overview.</p>
                    
                    <h5>Key Features:</h5>
                    <ul class="feature-list">
                        <li>Chart lifecycle management</li>
                        <li>Tab switching optimization</li>
                        <li>Responsive chart rendering</li>
                        <li>Real-time data updates</li>
                        <li>Multiple visualization types</li>
                    </ul>

                    <h5>Critical Pattern:</h5>
                    <div class="code-block">
                                            <pre><code>const [chartKey, setChartKey] = useState(0);

const handleTabChange = (value: string) => {
  setActiveTab(value);
  if (value === 'overview') {
    setChartKey(prev => prev + 1);
  }
};</code></pre>
                    </div>
                </div>

                <div class="component-card">
                    <h4>
                        MetricsExplorer.tsx
                        <span class="component-tag beta-tag">BETA</span>
                    </h4>
                    <p>Advanced analytics platform with Dynatrace-style interface for financial data analysis.</p>
                    
                    <h5>Key Features:</h5>
                    <ul class="feature-list">
                        <li>Simple and Advanced modes</li>
                        <li>Custom metric definitions</li>
                        <li>Multiple chart types</li>
                        <li>Real-time filtering</li>
                        <li>Responsive grid layouts</li>
                    </ul>

                    <h5>Mobile Pattern:</h5>
                    <div class="code-block">
                                            <pre><code>const isMobile = useIsMobile();

return (
  &lt;div className={`grid gap-4 ${
    isMobile ? 'grid-cols-1' : 'grid-cols-4'
  }`}&gt;
    {/* Responsive layout */}
  &lt;/div&gt;
);</code></pre>
                    </div>
                </div>

                <div class="component-card">
                    <h4>
                        AIChatPage.tsx
                        <span class="component-tag beta-tag">BETA</span>
                    </h4>
                    <p>KautilyaAI Co-Pilot interface with conversational CRUD operations and session management.</p>
                    
                    <h5>Key Features:</h5>
                    <ul class="feature-list">
                        <li>Session management</li>
                        <li>Real-time UI synchronization</li>
                        <li>Context-aware responses</li>
                        <li>Firebase Functions integration</li>
                        <li>Arthashastra wisdom integration</li>
                    </ul>

                    <h5>State Management:</h5>
                    <div class="code-block">
                                            <pre><code>const [messages, setMessages] = useState&lt;ChatMessage[]&gt;([]);
const [sessions, setSessions] = useState&lt;ChatSession[]&gt;([]);
const [currentSessionId, setCurrentSessionId] = useState('');</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Component Patterns -->
        <section class="section">
            <h2>üîÑ Component Patterns</h2>
            
            <h3>Props Interface Pattern</h3>
            <div class="code-block">
                                    <pre><code>// Always define TypeScript interfaces for component props
interface ComponentProps {
  // Required props
  data: DataType[];
  onAction: (item: DataType) => void;
  
  // Optional props with defaults
  variant?: 'default' | 'compact';
  loading?: boolean;
  
  // Event handlers
  onEdit?: (id: string) => void;
  onDelete?: (id: string) => void;
}

export function Component({ 
  data, 
  onAction, 
  variant = 'default', 
  loading = false,
  onEdit,
  onDelete 
}: ComponentProps) {
  // Component implementation
}</code></pre>
            </div>

            <h3>Error Boundary Pattern</h3>
            <div class="code-block">
                                    <pre><code>// Wrap components with error boundaries
export function SafeComponent(props: ComponentProps) {
  return (
    &lt;ErrorBoundary fallback={&lt;ErrorFallback /&gt;}&gt;
      &lt;Component {...props} /&gt;
    &lt;/ErrorBoundary&gt;
  );
}

// Component-level error handling
const handleAction = async () => {
  try {
    await performAction();
    toast.success("Action completed");
  } catch (error) {
    console.error('Component: Action failed', error);
    toast.error("Action failed");
  }
};</code></pre>
            </div>

            <h3>Responsive Design Pattern</h3>
            <div class="code-block">
                                    <pre><code>// Use mobile hook for JavaScript-based responsive design
const isMobile = useIsMobile();

return (
  &lt;div className={`grid gap-4 ${
    isMobile ? 'grid-cols-1' : 'grid-cols-2 lg:grid-cols-3'
  }`}&gt;
    {items.map(item => (
      &lt;ItemCard 
        key={item.id} 
        item={item} 
        compact={isMobile}
      /&gt;
    ))}
  &lt;/div&gt;
);</code></pre>
            </div>

            <h3>View Mode Support Pattern</h3>
            <div class="code-block">
                                    <pre><code>// Support both list and grid view modes
interface ComponentProps {
  viewMode: 'list' | 'grid';
  items: ItemType[];
}

export function Component({ viewMode, items }: ComponentProps) {
  return (
    &lt;div className={
      viewMode === 'grid' 
        ? "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" 
        : "space-y-4"
    }&gt;
      {items.map(item => (
        &lt;ItemCard 
          key={item.id} 
          item={item} 
          viewMode={viewMode}
        /&gt;
      ))}
    &lt;/div&gt;
  );
}</code></pre>
            </div>
        </section>

        <footer style="text-align: center; margin-top: 4rem; padding-top: 2rem; border-top: 2px solid #000; color: #666;">
            <p><strong>FinBuddy v2.7.0</strong> - Component Library Documentation</p>
            <p>Comprehensive component system with Radix UI and custom analytics</p>
        </footer>
    </div>
</body>
</html>
            color: #000;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #000;
            margin: 2rem 0 1rem 0;
            border-bottom: 1px solid #ccc;
            padding-bottom: 0.5rem;
        }

        h3 {
            font-size: 1.4rem;
            font-weight: 600;
            color: #000;
            margin: 1.5rem 0 1rem 0;
        }

        h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin: 1rem 0 0.5rem 0;
        }

        .component-card {
            background: #f8f8f8;
            border: 1px solid #ddd;
            padding: 2rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
        }

        .component-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
            gap: 1rem;
        }

        .component-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #000;
        }

        .component-type {
            background: #000;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 0.3rem;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            padding: 1.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .code-block code {
            background: none;
            padding: 0;
            font-size: inherit;
        }

        code {
            background: #f0f0f0;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .props-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
        }

        .props-table th,
        .props-table td {
            border: 1px solid #ddd;
            padding: 0.8rem;
            text-align: left;
        }

        .props-table th {
            background: #000;
            color: white;
            font-weight: 600;
        }

        .props-table td code {
            background: #f8f8f8;
            color: #333;
        }

        .category-section {
            background: #f0f8ff;
            border-left: 4px solid #0066cc;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0.3rem;
        }

        .category-section h3 {
            color: #0066cc;
            margin-top: 0;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .quick-ref {
            background: #fff;
            border: 2px solid #000;
            padding: 1.5rem;
            border-radius: 0.5rem;
        }

        .quick-ref h4 {
            color: #000;
            margin-bottom: 1rem;
        }

        .quick-ref ul {
            list-style: none;
            padding: 0;
        }

        .quick-ref li {
            margin-bottom: 0.5rem;
            color: #333;
        }

        .quick-ref li:before {
            content: "‚Üí ";
            color: #000;
            font-weight: bold;
        }

        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: #333;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #fdcb6e;
            padding: 1rem;
            border-radius: 0.3rem;
            margin: 1rem 0;
        }

        .warning strong {
            color: #b8860b;
        }

        footer {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #ccc;
            color: #666;
            font-size: 0.9rem;
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .component-card {
                padding: 1.5rem;
            }
            
            .component-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .component-grid {
                grid-template-columns: 1fr;
            }
            
            .props-table {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="./index.html" class="back-link">‚Üê Back to Documentation</a>
            <h1>‚öõÔ∏è React Components</h1>
            <p>Detailed documentation of all React components with props, interfaces, and usage examples</p>
        </header>

        <h2>Component Categories Overview</h2>
        <div class="component-grid">
            <div class="quick-ref">
                <h4>üèóÔ∏è Layout Components</h4>
                <ul>
                    <li>App.tsx - Main application wrapper</li>
                    <li>AppHeader.tsx - Application header</li>
                    <li>Navigation.tsx - Sidebar navigation</li>
                    <li>BottomNavigation.tsx - Mobile navigation</li>
                    <li>Footer.tsx - Application footer</li>
                </ul>
            </div>

            <div class="quick-ref">
                <h4>üí∞ Financial Components</h4>
                <ul>
                    <li>ExpenseCard.tsx - Expense display</li>
                    <li>AddExpenseModal.tsx - Add expense form</li>
                    <li>EditExpenseModal.tsx - Edit expense form</li>
                    <li>BudgetManager.tsx - Budget management</li>
                    <li>BudgetAnalyzer.tsx - AI budget analysis</li>
                </ul>
            </div>

            <div class="quick-ref">
                <h4>üìä Analytics Components</h4>
                <ul>
                    <li>MetricsExplorer.tsx - Analytics platform (BETA)</li>
                    <li>MetricsBuilder.tsx - Advanced query builder (BETA)</li>
                    <li>Dashboard.tsx - Main dashboard</li>
                    <li>GamificationSystem.tsx - Achievements</li>
                    <li>AdvancedCharts.tsx - Chart visualizations</li>
                    <li>SpendingBehaviorInsights.tsx - AI insights</li>
                </ul>
            </div>

            <div class="quick-ref">
                <h4>ü§ñ AI Components</h4>
                <ul>
                    <li>AIChatPage.tsx - KautilyaAI interface</li>
                    <li>FloatingAIButton.tsx - AI navigation</li>
                </ul>
            </div>

            <div class="quick-ref">
                <h4>üîß Utility Components</h4>
                <ul>
                    <li>CategoryManager.tsx - Category management</li>
                    <li>PeopleManager.tsx - People management</li>
                    <li>TimeframePicker.tsx - Date selection</li>
                    <li>PWAComponents.tsx - PWA features</li>
                </ul>
            </div>

            <div class="quick-ref">
                <h4>üé® UI Components</h4>
                <ul>
                    <li>ui/button.tsx - Button component</li>
                    <li>ui/card.tsx - Card component</li>
                    <li>ui/dialog.tsx - Modal dialogs</li>
                    <li>ui/input.tsx - Input fields</li>
                    <li>ui/... - Radix UI library</li>
                </ul>
            </div>
        </div>

        <h2>Core Application Components</h2>

        <div class="component-card">
            <div class="component-header">
                <div class="component-title">App.tsx</div>
                <div class="component-type">Main Component</div>
            </div>
            <p><strong>Location:</strong> <code>src/App.tsx</code></p>
            <p><strong>Purpose:</strong> Root application component that orchestrates global state, authentication, and navigation</p>
            
            <h4>Key Responsibilities</h4>
            <ul>
                <li>Authentication state management and routing</li>
                <li>Global application state (filters, search, view modes)</li>
                <li>Tab navigation between different features</li>
                <li>Firebase data integration through useFirestoreData hook</li>
                <li>PWA initialization and management</li>
            </ul>

            <h4>State Management</h4>
            <div class="code-block">
<code>// App.tsx - Global state management
function App() {
  const { user, loading: authLoading } = useAuth();
  const {
    expenses, budgets, templates,           // Core financial data
    customCategories, publicCategories,    // Category data
    customPeople, publicPeople,            // People data
    addExpense, updateExpense, deleteExpense // CRUD operations
  } = useFirestoreData();

  // Global application state
  const [activeTab, setActiveTab] = useState('expenses');
  const [searchTerm, setSearchTerm] = useState('');
  const [categoryFilter, setCategoryFilter] = useState('all');
  const [peopleFilter, setPeopleFilter] = useState('all');
  const [sortBy, setSortBy] = useState<'date' | 'amount' | 'category'>('date');
  const [viewMode, setViewMode] = useState<'list' | 'grid'>(() => {
    const saved = localStorage.getItem('finbuddy-view-mode');
    return (saved as 'list' | 'grid') || 'grid';
  });

  // Persist view mode changes
  useEffect(() => {
    localStorage.setItem('finbuddy-view-mode', viewMode);
  }, [viewMode]);

  // Authentication gate
  if (authLoading) return <LoadingSpinner />;
  if (!user) return <LoginPage />;

  return (
    <div className="app-container">
      <AppHeader activeTab={activeTab} onTabChange={setActiveTab} />
      <Navigation activeTab={activeTab} onTabChange={setActiveTab} />
      <MainContent />
      &lt;FloatingAIButton onClick={() =&gt; setActiveTab('ai-chat')} /&gt;
      <PWAComponents />
    </div>
  );
}</code>
            </div>
        </div>

        <div class="component-card">
            <div class="component-header">
                <div class="component-title">MetricsExplorer.tsx</div>
                <div class="component-type">Analytics Component (BETA)</div>
            </div>
            <p><strong>Location:</strong> <code>src/components/MetricsExplorer.tsx</code></p>
            <p><strong>Purpose:</strong> Professional analytics platform with Dynatrace-style interface for financial data analysis</p>
            
            <h4>Props Interface</h4>
            <table class="props-table">
                <thead>
                    <tr>
                        <th>Prop</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>expenses</td>
                        <td>Expense[]</td>
                        <td>‚úÖ</td>
                        <td>Array of expense data for analysis</td>
                    </tr>
                    <tr>
                        <td>budgets</td>
                        <td>Budget[]</td>
                        <td>‚úÖ</td>
                        <td>Budget data for utilization analysis</td>
                    </tr>
                    <tr>
                        <td>customCategories</td>
                        <td>Category[]</td>
                        <td>‚úÖ</td>
                        <td>User-defined categories</td>
                    </tr>
                    <tr>
                        <td>customPeople</td>
                        <td>Person[]</td>
                        <td>‚úÖ</td>
                        <td>User-defined people</td>
                    </tr>
                    <tr>
                        <td>publicPeople</td>
                        <td>Person[]</td>
                        <td>‚úÖ</td>
                        <td>Shared people from public collection</td>
                    </tr>
                </tbody>
            </table>

            <h4>Key Features</h4>
            <ul>
                <li><strong>Dual Interface:</strong> Simple metrics + Advanced query builder</li>
                <li><strong>BETA Badge:</strong> Professional blue badge indicating experimental status</li>
                <li><strong>Responsive Design:</strong> Mobile-optimized layouts with useIsMobile hook</li>
                <li><strong>Real-time Filtering:</strong> Dynamic data visualization updates</li>
                <li><strong>ApexCharts Integration:</strong> Professional chart rendering</li>
            </ul>

            <h4>Implementation Example</h4>
            <div class="code-block">
<code>// MetricsExplorer with BETA badge
function MetricsExplorer({ expenses, budgets, customCategories, customPeople, publicPeople }) {
  const isMobile = useIsMobile();
  
  return (
    &lt;div className="space-y-6"&gt;
      &lt;div className="flex items-center gap-2"&gt;
        &lt;h1 className="text-3xl font-bold"&gt;Metrics Explorer&lt;/h1&gt;
        &lt;Badge variant="secondary" className="bg-blue-100 text-blue-800 font-medium"&gt;
          BETA
        &lt;/Badge&gt;
      &lt;/div&gt;
      
      &lt;Tabs defaultValue="simple"&gt;
        &lt;TabsList&gt;
          &lt;TabsTrigger value="simple"&gt;Simple Metrics&lt;/TabsTrigger&gt;
          &lt;TabsTrigger value="advanced"&gt;Advanced Builder&lt;/TabsTrigger&gt;
        &lt;/TabsList&gt;
        
        &lt;TabsContent value="simple"&gt;
          {/* Simple interface with pre-built visualizations */}
        &lt;/TabsContent&gt;
        
        &lt;TabsContent value="advanced"&gt;
          &lt;MetricsBuilder /&gt;
        &lt;/TabsContent&gt;
      &lt;/Tabs&gt;
    &lt;/div&gt;
  );
}</code>
            </div>
        </div>

        <div class="component-card">
            <div class="component-header">
                <div class="component-title">MetricsBuilder.tsx</div>
                <div class="component-type">Analytics Component (BETA)</div>
            </div>
            <p><strong>Location:</strong> <code>src/components/MetricsBuilder.tsx</code></p>
            <p><strong>Purpose:</strong> Advanced Dynatrace-style query builder for custom financial analytics</p>
            
            <h4>Key Features</h4>
            <ul>
                <li><strong>Query Management:</strong> Add, remove, and switch between multiple queries</li>
                <li><strong>Dynamic Filters:</strong> Complex filtering with multiple operators</li>
                <li><strong>Metric Selection:</strong> Choose from various financial metrics</li>
                <li><strong>Split Dimensions:</strong> Analyze data by category, person, time, etc.</li>
                <li><strong>Responsive Grid:</strong> 3-column desktop layout, single-column mobile</li>
            </ul>

            <h4>Query Structure</h4>
            <div class="code-block">
<code>interface MetricQuery {
  id: string;
  name: string;
  metric: string;        // 'expense.amount', 'expense.count', etc.
  splitBy: string;       // 'category', 'person', 'date'
  filters: MetricFilter[];
  limit: number;
  chartType: 'line' | 'bar' | 'donut' | 'table';
}

interface MetricFilter {
  dimension: string;
  operator: 'equals' | 'contains' | 'greater_than' | 'less_than';
  value: string;
}</code>
            </div>

            <h4>Responsive Layout Implementation</h4>
            <div class="code-block">
<code>function MetricsBuilder() {
  const isMobile = useIsMobile(); // 768px breakpoint
  
  return (
    &lt;div className={`grid gap-6 ${isMobile ? 'grid-cols-1' : 'grid-cols-3'}`}&gt;
      &lt;Card&gt;
        {/* Query Builder Interface */}
      &lt;/Card&gt;
      
      &lt;div className={isMobile ? 'col-span-1' : 'col-span-2'}&gt;
        &lt;Card&gt;
          {/* Chart Display */}
        &lt;/Card&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}</code>
            </div>
        </div>

        <div class="component-card">
            <div class="component-header">
                <div class="component-title">Dashboard.tsx</div>
                <div class="component-type">Analytics Component</div>
            </div>
            <p><strong>Location:</strong> <code>src/components/Dashboard.tsx</code></p>
            <p><strong>Purpose:</strong> Advanced dashboard with tab-based navigation and ApexCharts integration</p>
            
            <h4>Props Interface</h4>
            <table class="props-table">
                <thead>
                    <tr>
                        <th>Prop</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>expenses</code></td>
                        <td><code>Expense[]</code></td>
                        <td>Yes</td>
                        <td>Array of user expenses for chart visualization</td>
                    </tr>
                    <tr>
                        <td><code>budgets</code></td>
                        <td><code>Budget[]</code></td>
                        <td>Yes</td>
                        <td>Array of user budgets for analysis</td>
                    </tr>
                    <tr>
                        <td><code>customPeople</code></td>
                        <td><code>Person[]</code></td>
                        <td>Yes</td>
                        <td>User's custom people for expense attribution</td>
                    </tr>
                    <tr>
                        <td><code>publicPeople</code></td>
                        <td><code>Person[]</code></td>
                        <td>Yes</td>
                        <td>Public people data for comprehensive analysis</td>
                    </tr>
                </tbody>
            </table>

            <h4>Critical Implementation Pattern</h4>
            <div class="code-block">
<code>// Dashboard.tsx - Chart lifecycle management (CRITICAL for ApexCharts)
function Dashboard({ expenses, budgets, customPeople, publicPeople }: DashboardProps) {
  const [activeTab, setActiveTab] = useState('overview');
  const [chartKey, setChartKey] = useState(0);
  
  // Chart instance refs for proper cleanup
  const areaChartInstance = useRef<ApexCharts | null>(null);
  const columnChartInstance = useRef<ApexCharts | null>(null);

  // CRITICAL: Tab switching pattern for charts
  const handleTabChange = (value: string) => {
    setActiveTab(value);
    // Force chart re-render when returning to overview - REQUIRED for ApexCharts
    if (value === 'overview') {
      setChartKey(prev => prev + 1);
    }
  };

  // Chart lifecycle management
  useEffect(() => {
    // Clean up existing chart instances
    if (areaChartInstance.current) {
      areaChartInstance.current.destroy();
      areaChartInstance.current = null;
    }
    
    // Re-initialize charts when tab changes to overview
    if (activeTab === 'overview' && areaChartRef.current) {
      const chartOptions = {
        chart: { type: 'area', height: 300 },
        series: chartData,
        // ... other chart configuration
      };
      
      areaChartInstance.current = new ApexCharts(areaChartRef.current, chartOptions);
      areaChartInstance.current.render();
    }
  }, [activeTab, chartKey, expenses, budgets]);

  return (
    <Tabs value={activeTab} onValueChange={handleTabChange}>
      <TabsList>
        <TabsTrigger value="overview">Overview</TabsTrigger>
        <TabsTrigger value="advanced">Advanced</TabsTrigger>
        <TabsTrigger value="behavior">Behavior</TabsTrigger>
        <TabsTrigger value="achievements">Achievements</TabsTrigger>
        <TabsTrigger value="budgets">Budgets</TabsTrigger>
      </TabsList>
      
      <TabsContent value="overview">
        {/* Chart containers MUST have unique keys for re-rendering */}
        <div key={`area-chart-${chartKey}`} ref={areaChartRef} className="w-full h-64" />
        <div key={`column-chart-${chartKey}`} ref={columnChartRef} className="w-full h-64" />
      </TabsContent>
      
      {/* Other tab contents */}
    </Tabs>
  );
}</code>
            </div>

            <div class="warning">
                <strong>Critical Note:</strong> Never skip the chartKey increment when switching tabs! Charts will disappear without proper lifecycle management. This is essential for ApexCharts in React environments.
            </div>
        </div>

        <div class="component-card">
            <div class="component-header">
                <div class="component-title">AIChatPage.tsx</div>
                <div class="component-type">AI Component</div>
            </div>
            <p><strong>Location:</strong> <code>src/components/AIChatPage.tsx</code></p>
            <p><strong>Purpose:</strong> KautilyaAI Co-Pilot interface with conversational CRUD operations</p>
            
            <h4>Component Structure</h4>
            <div class="code-block">
<code>// AIChatPage.tsx - AI chat interface
function AIChatPage() {
  // Chat state management
  const [messages, setMessages] = useState<ChatMessage[]>([]);
  const [currentSessionId, setCurrentSessionId] = useState<string>('');
  const [sessions, setSessions] = useState<ChatSession[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  
  // Firebase and auth integration
  const { user } = useAuth();
  const firestoreData = useFirestoreData();
  
  // Firebase Functions integration
  const chatWithGemini = httpsCallable(functions, 'chatWithGemini');
  
  const sendMessage = async (messageText: string) => {
    if (!user || !messageText.trim()) return;
    
    try {
      // Call AI with comprehensive context
      const result = await chatWithGemini({
        userId: user.uid,
        message: messageText.trim(),
        sessionId: currentSessionId,
        context: {
          recentExpenses: firestoreData.expenses.slice(0, 20),
          activeBudgets: firestoreData.budgets.filter(b => b.isActive !== false),
          customPeople: firestoreData.customPeople.slice(0, 50),
          publicPeople: firestoreData.publicPeople.slice(0, 20)
        }
      });
      
      // Handle AI response and executed actions
      const data = result.data as any;
      
      if (data.executedActions && data.executedActions.length > 0) {
        for (const action of data.executedActions) {
          if (action.success) {
            toast.success(`‚úÖ ${action.summary}`);
          } else {
            toast.error(`‚ùå Failed: ${action.error}`);
          }
        }
      }
      
    } catch (error) {
      console.error('Chat error:', error);
      toast.error('Failed to send message');
    }
  };

  return (
    <div className="ai-chat-container">
      <ChatHeader sessions={sessions} currentSessionId={currentSessionId} />
      <MessageList messages={messages} isLoading={isLoading} />
      <MessageInput onSendMessage={sendMessage} disabled={isLoading} />
    </div>
  );
}</code>
            </div>

            <h4>Key Features</h4>
            <ul>
                <li><strong>Session Management:</strong> Persistent chat history with organized sessions</li>
                <li><strong>Real-time CRUD:</strong> AI commands directly modify Firebase data</li>
                <li><strong>Context Awareness:</strong> AI has access to user's financial data</li>
                <li><strong>Error Handling:</strong> Robust error handling with user feedback</li>
                <li><strong>UI Synchronization:</strong> Immediate updates via useFirestoreData hook</li>
            </ul>
        </div>

        <div class="component-card">
            <div class="component-header">
                <div class="component-title">ExpenseCard.tsx</div>
                <div class="component-type">Display Component</div>
            </div>
            <p><strong>Location:</strong> <code>src/components/ExpenseCard.tsx</code></p>
            <p><strong>Purpose:</strong> Individual expense display component with list/grid view support</p>
            
            <h4>Props Interface</h4>
            <table class="props-table">
                <thead>
                    <tr>
                        <th>Prop</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>expense</code></td>
                        <td><code>Expense</code></td>
                        <td>Yes</td>
                        <td>Expense object with all financial data</td>
                    </tr>
                    <tr>
                        <td><code>viewMode</code></td>
                        <td><code>'list' | 'grid'</code></td>
                        <td>Yes</td>
                        <td>Display mode for responsive layout</td>
                    </tr>
                    <tr>
                        <td><code>allPeople</code></td>
                        <td><code>Person[]</code></td>
                        <td>Yes</td>
                        <td>Combined custom and public people data</td>
                    </tr>
                    <tr>
                        <td><code>onEdit</code></td>
                        <td><code>(expense: Expense) => void</code></td>
                        <td>Yes</td>
                        <td>Callback function for editing expense</td>
                    </tr>
                    <tr>
                        <td><code>onDelete</code></td>
                        <td><code>(expenseId: string) => void</code></td>
                        <td>Yes</td>
                        <td>Callback function for deleting expense</td>
                    </tr>
                </tbody>
            </table>

            <h4>Implementation Pattern</h4>
            <div class="code-block">
<code>// ExpenseCard.tsx - View mode support
interface ExpenseCardProps {
  expense: Expense;
  viewMode: 'list' | 'grid';
  allPeople: Person[];
  onEdit: (expense: Expense) => void;
  onDelete: (expenseId: string) => void;
}

function ExpenseCard({ expense, viewMode, allPeople, onEdit, onDelete }: ExpenseCardProps) {
  // Get people data for this expense using getAllPeople pattern
  const selectedPeopleData = expense.peopleIds?.map(id => 
    allPeople.find(person => person.id === id)
  ).filter(Boolean) || [];

  // Conditional styling based on view mode
  const cardClassName = viewMode === 'grid' 
    ? "bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow"
    : "bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow flex items-center justify-between";

  return (
    <Card className={cardClassName}>
      <CardContent className={viewMode === 'list' ? "flex-1 p-0" : "p-0"}>
        <div className="flex items-center justify-between mb-2">
          <h3 className="font-semibold text-gray-900">{expense.description}</h3>
          <span className="text-lg font-bold text-green-600">
            {formatCurrency(expense.amount)}
          </span>
        </div>
        
        <div className="flex items-center gap-2 text-sm text-gray-600 mb-2">
          <span className="bg-blue-100 text-blue-800 px-2 py-1 rounded">
            {expense.category}
          </span>
          <span>{formatDate(expense.date)}</span>
        </div>

        {/* People attribution display */}
        {selectedPeopleData.length > 0 && (
          <div className="flex flex-wrap gap-1 mb-2">
            {selectedPeopleData.map(person => (
              <Badge 
                key={person.id} 
                variant="outline"
                style={{ 
                  backgroundColor: person.color,
                  borderColor: person.color,
                  color: '#fff'
                }}
              >
                {person.icon} {person.name}
              </Badge>
            ))}
          </div>
        )}

        {/* Receipt indicator */}
        {expense.receiptUrl && (
          <div className="flex items-center gap-1 text-xs text-gray-500">
            <FileText className="h-3 w-3" />
            <span>Receipt attached</span>
          </div>
        )}
      </CardContent>

      {/* Action buttons */}
      <div className="flex gap-2 mt-2">
        <Button variant="outline" size="sm" onClick={() => onEdit(expense)}>
          <Edit2 className="h-4 w-4" />
        </Button>
        <Button variant="outline" size="sm" onClick={() => onDelete(expense.id)}>
          <Trash2 className="h-4 w-4" />
        </Button>
      </div>
    </Card>
  );
}</code>
            </div>
        </div>

        <div class="component-card">
            <div class="component-header">
                <div class="component-title">PeopleManager.tsx</div>
                <div class="component-type">Management Component</div>
            </div>
            <p><strong>Location:</strong> <code>src/components/PeopleManager.tsx</code></p>
            <p><strong>Purpose:</strong> People management with public/private sharing capabilities</p>
            
            <h4>Key Features</h4>
            <ul>
                <li><strong>CRUD Operations:</strong> Create, read, update, delete people records</li>
                <li><strong>Public/Private Sharing:</strong> People can be shared publicly or kept private</li>
                <li><strong>Icon & Color Selection:</strong> Full customization with predefined options</li>
                <li><strong>Relationship Types:</strong> Categorize people by relationship (Family, Friend, etc.)</li>
                <li><strong>Adoption System:</strong> Users can adopt public people to their collection</li>
            </ul>

            <h4>Usage Pattern</h4>
            <div class="code-block">
<code>// PeopleManager.tsx - People data management
function PeopleManager({ 
  customPeople, 
  publicPeople, 
  onAddPerson, 
  onUpdatePerson, 
  onDeletePerson 
}: PeopleManagerProps) {
  const [selectedTab, setSelectedTab] = useState('my-people');
  const [editingPerson, setEditingPerson] = useState<Person | null>(null);
  const [showAddDialog, setShowAddDialog] = useState(false);

  // Get all people using the standard pattern
  const allPeople = getAllPeople([...customPeople, ...publicPeople]);

  const handleAddPerson = async (personData: Omit<Person, 'id'>) => {
    try {
      await onAddPerson(personData);
      setShowAddDialog(false);
      toast.success('Person added successfully!');
    } catch (error) {
      console.error('Error adding person:', error);
      toast.error('Failed to add person');
    }
  };

  const handleAdoptPerson = async (person: Person) => {
    try {
      await adoptPublicPerson(person.id);
      toast.success(`${person.name} added to your people!`);
    } catch (error) {
      console.error('Error adopting person:', error);
      toast.error('Failed to adopt person');
    }
  };

  return (
    <div className="people-manager">
      <Tabs value={selectedTab} onValueChange={setSelectedTab}>
        <TabsList>
          <TabsTrigger value="my-people">My People</TabsTrigger>
          <TabsTrigger value="public-people">Public People</TabsTrigger>
        </TabsList>
        
        <TabsContent value="my-people">
          <PersonList 
            people={customPeople}
            onEdit={setEditingPerson}
            onDelete={onDeletePerson}
            showActions={true}
          />
        </TabsContent>
        
        <TabsContent value="public-people">
          <PersonList 
            people={publicPeople}
            onAdopt={handleAdoptPerson}
            showActions={false}
          />
        </TabsContent>
      </Tabs>
      
      {/* Add/Edit dialogs */}
      <PersonDialog 
        isOpen={showAddDialog || !!editingPerson}
        person={editingPerson}
        onSave={editingPerson ? onUpdatePerson : handleAddPerson}
        onClose={() => {
          setShowAddDialog(false);
          setEditingPerson(null);
        }}
      />
    </div>
  );
}</code>
            </div>
        </div>

        <div class="category-section">
            <h3>Critical Component Patterns</h3>
            
            <h4>1. People Data Consistency Pattern</h4>
            <div class="code-block">
<code>// ALWAYS use getAllPeople() for consistent people data across components
const allPeople = getAllPeople([...customPeople, ...publicPeople]);
const selectedPeopleData = selectedPeople.map(id => 
  allPeople.find(person => person.id === id)
).filter(Boolean);</code>
            </div>

            <h4>2. Firebase Authentication Check Pattern</h4>
            <div class="code-block">
<code>// EVERY Firebase operation must start with this check
const handleFirebaseOperation = async () => {
  if (!user) {
    toast.error("Please sign in to continue");
    return;
  }
  
  try {
    // Firebase operation here
    await someFirebaseOperation();
    toast.success("Operation completed");
  } catch (error) {
    console.error('Operation failed:', error);
    toast.error("Operation failed");
  }
};</code>
            </div>

            <h4>3. View Mode Support Pattern</h4>
            <div class="code-block">
<code>// Component with view mode support
interface ComponentProps {
  viewMode: 'list' | 'grid';
  // ... other props
}

// Conditional rendering based on view mode
<div className={
  viewMode === 'grid' 
    ? "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4" 
    : "space-y-4"
}>
  {items.map(item => (
    <ItemComponent key={item.id} item={item} viewMode={viewMode} />
  ))}
</div></code>
            </div>
        </div>

        <h2>UI Component Library</h2>
        <div class="component-card">
            <h3>Radix UI Integration</h3>
            <p><strong>Location:</strong> <code>src/components/ui/</code></p>
            <p>FinBuddy uses Radix UI primitives with Tailwind CSS styling for consistent, accessible components.</p>
            
            <h4>Core UI Components</h4>
            <ul>
                <li><strong>Button:</strong> <code>ui/button.tsx</code> - Primary/secondary/outline button variants</li>
                <li><strong>Card:</strong> <code>ui/card.tsx</code> - Container component with header/content/footer</li>
                <li><strong>Dialog:</strong> <code>ui/dialog.tsx</code> - Modal dialogs with overlay</li>
                <li><strong>Input:</strong> <code>ui/input.tsx</code> - Text input with validation states</li>
                <li><strong>Select:</strong> <code>ui/select.tsx</code> - Dropdown selection component</li>
                <li><strong>Tabs:</strong> <code>ui/tabs.tsx</code> - Tab navigation component</li>
                <li><strong>Sheet:</strong> <code>ui/sheet.tsx</code> - Slide-out panel component</li>
                <li><strong>Badge:</strong> <code>ui/badge.tsx</code> - Small label component</li>
                <li><strong>Avatar:</strong> <code>ui/avatar.tsx</code> - User profile image component</li>
                <li><strong>Scroll Area:</strong> <code>ui/scroll-area.tsx</code> - Custom scrollbar component</li>
            </ul>

            <h4>Usage Example</h4>
            <div class="code-block">
<code>// Using UI components in feature components
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';

function FeatureComponent() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>Component Title</CardTitle>
      </CardHeader>
      <CardContent>
        <p>Content goes here</p>
        <Button variant="primary" onClick={handleClick}>
          Action Button
        </Button>
      </CardContent>
    </Card>
  );
}</code>
            </div>
        </div>

        <div class="warning">
            <strong>Component Development Best Practices:</strong>
            <ul>
                <li><strong>TypeScript Interfaces:</strong> Always define proper prop interfaces for components</li>
                <li><strong>Error Boundaries:</strong> Use React Error Boundary for component-level error handling</li>
                <li><strong>View Mode Support:</strong> Components should accept viewMode prop for responsive rendering</li>
                <li><strong>Authentication Checks:</strong> Verify user authentication before Firebase operations</li>
                <li><strong>Loading States:</strong> Implement proper loading and error states for better UX</li>
                <li><strong>Accessibility:</strong> Use semantic HTML and ARIA labels for screen readers</li>
            </ul>
        </div>

        <footer>
            <p>&copy; 2025 FinBuddy Developer Documentation | React Components Guide</p>
        </footer>
    </div>
</body>
</html>




