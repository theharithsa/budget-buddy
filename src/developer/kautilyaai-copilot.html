<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KautilyaAI Co-Pilot Developer Documentation - FinBuddy</title>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Titillium Web', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background: #ffffff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #8b5cf6;
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            padding: 2rem;
            border-radius: 8px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: white;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #e9d5ff;
            margin-bottom: 1rem;
        }

        .version-badges {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            color: white;
        }

        .breadcrumb {
            color: #666;
            margin-bottom: 1rem;
        }

        .breadcrumb a {
            color: #8b5cf6;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        h2 {
            font-size: 1.8rem;
            margin: 2rem 0 1rem 0;
            color: #000;
            border-bottom: 1px solid #8b5cf6;
            padding-bottom: 0.5rem;
        }

        h3 {
            font-size: 1.4rem;
            margin: 1.5rem 0 1rem 0;
            color: #000;
        }

        h4 {
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem 0;
            color: #333;
        }

        p {
            margin-bottom: 1rem;
            color: #333;
        }

        pre {
            background: #f8f8f8;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        code {
            background: #f0f0f0;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            padding: 0;
        }

        .info-box {
            background: #f0f4ff;
            border-left: 4px solid #8b5cf6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }

        .warning-box {
            background: #fef3e2;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }

        .success-box {
            background: #f0fdf4;
            border-left: 4px solid #22c55e;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }

        .wisdom-box {
            background: linear-gradient(135deg, #fef7e0 0%, #fbbf24 5%, #f59e0b 100%);
            border-left: 4px solid #d97706;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }

        .architecture-diagram {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .flow-step {
            display: inline-block;
            background: #8b5cf6;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            margin: 0.25rem;
            font-weight: 600;
        }

        .arrow {
            font-size: 1.5rem;
            color: #8b5cf6;
            margin: 0 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .endpoint-table {
            font-family: monospace;
            font-size: 0.9em;
        }

        ul {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        .toc {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            margin-bottom: 0.5rem;
        }

        .toc a {
            color: #8b5cf6;
            text-decoration: none;
            padding: 0.25rem 0;
            display: block;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .feature-card h4 {
            color: #8b5cf6;
            margin-bottom: 1rem;
        }

        .status-current {
            background: #fef3e2;
            color: #f59e0b;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="breadcrumb">
                <a href="index.html">Developer Docs</a> / KautilyaAI Co-Pilot
            </div>
            <h1>ü§ñ KautilyaAI Co-Pilot</h1>
            <p class="subtitle">Comprehensive Developer Guide - Ancient Wisdom meets Modern AI</p>
            <div class="version-badges">
                <span class="badge">Version 2.6.0</span>
                <span class="badge">Gemini 2.0 Flash</span>
                <span class="badge">Firebase Functions v2</span>
                <span class="badge">Arthashastra Integration</span>
                <span class="badge status-current">READ-Only Mode</span>
            </div>
        </header>

        <!-- Table of Contents -->
        <div class="toc">
            <h3>üìã Table of Contents</h3>
            <ul>
                <li><a href="#overview">üéØ System Overview</a></li>
                <li><a href="#architecture">üèóÔ∏è Technical Architecture</a></li>
                <li><a href="#arthashastra">üìú Arthashastra Integration</a></li>
                <li><a href="#firebase-functions">üî• Firebase Functions Implementation</a></li>
                <li><a href="#data-analysis">üìä Comprehensive Data Analysis</a></li>
                <li><a href="#api-reference">üìö API Reference</a></li>
                <li><a href="#wisdom-engine">üß† Wisdom Engine</a></li>
                <li><a href="#deployment">üöÄ Deployment Guide</a></li>
                <li><a href="#troubleshooting">üîß Troubleshooting</a></li>
                <li><a href="#future-development">üîÆ Future Development</a></li>
            </ul>
        </div>

        <!-- System Overview -->
        <section id="overview">
            <h2>üéØ System Overview</h2>
            
            <p>KautilyaAI Co-Pilot represents a revolutionary approach to financial AI, combining ancient Arthashastra wisdom with modern Google Gemini 2.0 Flash technology. The system provides comprehensive financial analysis, wisdom-based guidance, and culturally relevant insights for personal finance management.</p>

            <div class="info-box">
                <h4>üîë Key Differentiators</h4>
                <ul>
                    <li><strong>Ancient Wisdom Integration:</strong> 2,300-year-old Chanakya principles applied to modern finances</li>
                    <li><strong>Comprehensive Data Analysis:</strong> Reads and analyzes ALL user financial data for deep insights</li>
                    <li><strong>Cultural Relevance:</strong> Understands Indian financial culture, festivals, and family obligations</li>
                    <li><strong>Advanced AI:</strong> Google Gemini 2.0 Flash for superior natural language understanding</li>
                    <li><strong>Real-time Processing:</strong> Live analysis with immediate wisdom-based responses</li>
                </ul>
            </div>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Current Mode: Wisdom-Only (READ-Only)</h4>
                <p>KautilyaAI is currently operating in wisdom-only mode for enhanced AI training. All CRUD operations are disabled to focus on providing the most comprehensive financial analysis and guidance possible. This mode ensures optimal learning from user financial patterns while maintaining complete data safety.</p>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üìä Financial Analysis Engine</h4>
                    <p>Analyzes expenses, budgets, categories, people networks, and templates to provide comprehensive financial insights with efficiency scoring and recommendations.</p>
                </div>
                <div class="feature-card">
                    <h4>üî± Arthashastra Wisdom System</h4>
                    <p>Integrates five core principles from Chanakya's Arthashastra, translating Sanskrit concepts into modern financial guidance with cultural context.</p>
                </div>
                <div class="feature-card">
                    <h4>ü§ñ Gemini 2.0 Flash Integration</h4>
                    <p>Leverages Google's latest AI model for superior natural language processing, context understanding, and personalized response generation.</p>
                </div>
                <div class="feature-card">
                    <h4>üîç Comprehensive Data Context</h4>
                    <p>Reads from 7 Firestore collections providing complete financial context: expenses, budgets, categories, people, templates, and public data.</p>
                </div>
            </div>
        </section>

        <!-- Technical Architecture -->
        <section id="architecture">
            <h2>üèóÔ∏è Technical Architecture</h2>

            <div class="architecture-diagram">
                <h3>KautilyaAI System Flow</h3>
                <div style="margin: 2rem 0;">
                    <span class="flow-step">User Query</span>
                    <span class="arrow">‚Üí</span>
                    <span class="flow-step">Firebase Function</span>
                    <span class="arrow">‚Üí</span>
                    <span class="flow-step">Data Collection</span>
                    <span class="arrow">‚Üí</span>
                    <span class="flow-step">Wisdom Engine</span>
                    <span class="arrow">‚Üí</span>
                    <span class="flow-step">Gemini 2.0</span>
                    <span class="arrow">‚Üí</span>
                    <span class="flow-step">Insight Response</span>
                </div>
            </div>

            <h3>üîß Core Components</h3>

            <h4>1. Firebase Functions v2 Backend</h4>
            <pre><code>// functions/src/index.ts - Main implementation
export const chatWithGemini = onCall({
  secrets: [geminiApiKey],
  cors: true,
}, async (request) => {
  // 1. Authentication validation
  // 2. Financial data collection
  // 3. Wisdom prompt enhancement
  // 4. Gemini AI processing
  // 5. Response with insights
});

export const getFinancialInsights = onCall({
  cors: true,
}, async (request) => {
  // Comprehensive dashboard analytics
  // with Arthashastra principles
});</code></pre>

            <h4>2. Comprehensive Data Collection</h4>
            <pre><code>// getUserFinancialData function
async function getUserFinancialData(userId: string) {
  const [
    expensesSnapshot,
    budgetsSnapshot, 
    customCategoriesSnapshot,
    customPeopleSnapshot,
    templatesSnapshot,
    publicCategoriesSnapshot,
    publicPeopleSnapshot
  ] = await Promise.all([
    db.collection('users').doc(userId).collection('expenses')
      .orderBy('date', 'desc').limit(100).get(),
    // ... all other collections
  ]);
  
  return {
    expenses,
    budgets,
    customCategories,
    customPeople,
    templates,
    publicCategories,
    publicPeople
  };
}</code></pre>

            <div class="success-box">
                <h4>‚úÖ Architecture Benefits</h4>
                <ul>
                    <li><strong>Scalable:</strong> Firebase Functions auto-scale based on demand</li>
                    <li><strong>Secure:</strong> All data processing happens in Google Cloud</li>
                    <li><strong>Real-time:</strong> Immediate response generation with live data</li>
                    <li><strong>Cost-effective:</strong> Pay-per-use model with Gemini integration</li>
                </ul>
            </div>
        </section>

        <!-- Arthashastra Integration -->
        <section id="arthashastra">
            <h2>üìú Arthashastra Integration Deep Dive</h2>

            <div class="wisdom-box">
                <h4>üî± Chanakya's Economic Philosophy in Code</h4>
                <p>KautilyaAI implements the world's first AI system that operationalizes Chanakya's 2,300-year-old economic principles for modern personal finance management.</p>
            </div>

            <h3>Core Wisdom Implementation</h3>
            <pre><code>// functions/src/lib/wisdom/simpleWisdom.ts
const CORE_WISDOM = [
  {
    id: 'kosha_mula_danda',
    principle: 'Treasury is the foundation of governance',
    sanskritTerm: '‡§ï‡•ã‡§∑ ‡§Æ‡•Ç‡§≤ ‡§¶‡§£‡•ç‡§°',
    modernInterpretation: 'Financial stability is the foundation of all life decisions',
    financialApplications: ['Emergency fund building', 'Financial security'],
    category: 'financial_planning'
  },
  {
    id: 'mitavyaya',
    principle: 'Moderate spending brings prosperity',
    sanskritTerm: '‡§Æ‡§ø‡§§‡§µ‡•ç‡§Ø‡§Ø',
    modernInterpretation: 'Balanced spending - neither extreme frugality nor excess',
    financialApplications: ['Lifestyle balance', 'Spending optimization'],
    category: 'expense_management'
  }
  // ... 3 more core principles
];</code></pre>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üèõÔ∏è Kosha (‡§ï‡•ã‡§∑)</h4>
                    <p><strong>Treasury/Emergency Fund</strong><br>
                    Applied to: Emergency fund recommendations, financial foundation building</p>
                </div>
                <div class="feature-card">
                    <h4>‚öñÔ∏è Mitavyaya (‡§Æ‡§ø‡§§‡§µ‡•ç‡§Ø‡§Ø)</h4>
                    <p><strong>Moderate Spending</strong><br>
                    Applied to: Budget optimization, lifestyle balance recommendations</p>
                </div>
                <div class="feature-card">
                    <h4>üí∞ Arthagama (‡§Ö‡§∞‡•ç‡§•‡§æ‡§ó‡§Æ)</h4>
                    <p><strong>Income Generation</strong><br>
                    Applied to: Income vs expense analysis, financial health scoring</p>
                </div>
                <div class="feature-card">
                    <h4>‚è∞ Kala Yoga (‡§ï‡§æ‡§≤ ‡§Ø‡•ã‡§ó)</h4>
                    <p><strong>Right Timing</strong><br>
                    Applied to: Purchase timing advice, market cycle awareness</p>
                </div>
            </div>
        </section>

        <!-- API Reference -->
        <section id="api-reference">
            <h2>üìö API Reference</h2>

            <h3>Firebase Functions Endpoints</h3>
            <table class="endpoint-table">
                <thead>
                    <tr>
                        <th>Function Name</th>
                        <th>Method</th>
                        <th>Purpose</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>chatWithGemini</td>
                        <td>onCall</td>
                        <td>Natural language financial chat with wisdom</td>
                        <td class="status-active">‚úÖ Active (READ-only)</td>
                    </tr>
                    <tr>
                        <td>getFinancialInsights</td>
                        <td>onCall</td>
                        <td>Comprehensive dashboard analytics</td>
                        <td class="status-active">‚úÖ Active</td>
                    </tr>
                </tbody>
            </table>

            <h3>chatWithGemini API</h3>
            <h4>Request Format</h4>
            <pre><code>{
  "userId": "string",           // Firebase Auth UID
  "message": "string",          // User's question/request
  "context": "string",          // Optional context hint
  "conversationHistory": []     // Previous conversation context
}</code></pre>

            <h4>Response Format</h4>
            <pre><code>{
  "success": boolean,
  "response": "string",         // AI-generated response with wisdom
  "timestamp": "string",        // ISO timestamp
  "wisdomSuggestions": [        // Array of wisdom recommendations
    {
      "suggestion": "string",
      "sanskritTerm": "string",
      "principle": "string"
    }
  ],
  "dailyWisdom": "string",      // Daily Arthashastra insight
  "mode": "wisdom-only"         // Current operation mode
}</code></pre>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Authentication Requirements</h4>
                <p>All API calls require valid Firebase Authentication. The <code>request.auth.uid</code> must match the provided <code>userId</code> parameter.</p>
            </div>
        </section>

        <!-- Deployment Guide -->
        <section id="deployment">
            <h2>üöÄ Deployment Guide</h2>

            <h3>Prerequisites</h3>
            <ul>
                <li>Node.js 22+ installed</li>
                <li>Firebase CLI configured</li>
                <li>Google Cloud Project with Firebase enabled</li>
                <li>Gemini API key from Google AI Studio</li>
            </ul>

            <h3>Environment Setup</h3>
            <pre><code># 1. Install dependencies
cd functions
npm install

# 2. Set Gemini API key as Firebase secret
firebase functions:secrets:set GEMINI_API_KEY
# Enter your Gemini API key when prompted

# 3. Build TypeScript
npm run build

# 4. Deploy functions
firebase deploy --only functions</code></pre>

            <div class="success-box">
                <h4>‚úÖ Deployment Verification</h4>
                <p>After successful deployment, verify the functions are working:</p>
                <ul>
                    <li>Check Firebase Console ‚Üí Functions for active deployments</li>
                    <li>Test API endpoints using Firebase Emulator Suite</li>
                    <li>Monitor logs: <code>firebase functions:log</code></li>
                    <li>Verify Gemini API key is accessible in function environment</li>
                </ul>
            </div>
        </section>

        <!-- Troubleshooting -->
        <section id="troubleshooting">
            <h2>üîß Troubleshooting Guide</h2>

            <h3>Common Issues & Solutions</h3>

            <h4>1. Function Deployment Errors</h4>
            <div class="warning-box">
                <p><strong>Issue:</strong> TypeScript compilation errors during deployment</p>
                <p><strong>Solution:</strong></p>
                <pre><code># Clear build cache
rm -rf functions/lib
cd functions
npm run build

# Check for TypeScript errors
npx tsc --noEmit

# Redeploy
firebase deploy --only functions</code></pre>
            </div>

            <h4>2. Gemini API Integration Issues</h4>
            <div class="warning-box">
                <p><strong>Issue:</strong> "API key not found" or authentication errors</p>
                <p><strong>Solution:</strong></p>
                <pre><code># Verify secret is set
firebase functions:secrets:access GEMINI_API_KEY

# Re-set if necessary
firebase functions:secrets:set GEMINI_API_KEY</code></pre>
            </div>

            <h3>Performance Optimization</h3>
            <ul>
                <li><strong>Data Limits:</strong> Keep expense queries to last 100 transactions</li>
                <li><strong>Parallel Processing:</strong> Use Promise.all for multiple Firestore queries</li>
                <li><strong>Response Caching:</strong> Consider implementing response caching for frequent queries</li>
                <li><strong>Error Handling:</strong> Implement comprehensive try-catch blocks</li>
            </ul>
        </section>

        <!-- Future Development -->
        <section id="future-development">
            <h2>üîÆ Future Development Roadmap</h2>

            <h3>Phase 1: CRUD Operations Return</h3>
            <div class="info-box">
                <h4>üéØ Planned Features</h4>
                <ul>
                    <li><strong>Full CRUD Restoration:</strong> Enable expense/budget/category management via chat</li>
                    <li><strong>Enhanced Context:</strong> Improved conversation memory and context awareness</li>
                    <li><strong>Bulk Operations:</strong> "Delete all entertainment expenses from last week"</li>
                    <li><strong>Smart Suggestions:</strong> Proactive financial insights and recommendations</li>
                </ul>
            </div>

            <h3>Phase 2: Advanced AI Features</h3>
            <ul>
                <li><strong>Voice Commands:</strong> "Hey KautilyaAI, add ‚Çπ200 for lunch"</li>
                <li><strong>Receipt OCR:</strong> Extract expense details from receipt images</li>
                <li><strong>Predictive Analytics:</strong> AI-powered spending forecasts</li>
                <li><strong>Multi-language:</strong> Hindi, Tamil, Telugu language processing</li>
            </ul>

            <h3>Technical Improvements</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üöÄ Performance</h4>
                    <ul>
                        <li>Response caching</li>
                        <li>Optimized data queries</li>
                        <li>Edge function deployment</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üîí Security</h4>
                    <ul>
                        <li>Enhanced authentication</li>
                        <li>Rate limiting</li>
                        <li>Data encryption</li>
                    </ul>
                </div>
            </div>
        </section>

        <div style="margin: 2rem 0; padding: 1.5rem; background: #f8fafc; border-left: 4px solid #8b5cf6; border-radius: 0 8px 8px 0;">
            <h3 style="margin-top: 0; color: #8b5cf6;">üìã Developer Quick Reference</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                <div>
                    <h4>üîó Key Endpoints</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li><code>chatWithGemini</code> - AI chat with wisdom</li>
                        <li><code>getFinancialInsights</code> - Dashboard analytics</li>
                    </ul>
                </div>
                <div>
                    <h4>üìÇ Core Files</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li><code>functions/src/index.ts</code> - Main functions</li>
                        <li><code>functions/src/lib/wisdom/simpleWisdom.ts</code> - Wisdom engine</li>
                    </ul>
                </div>
                <div>
                    <h4>üîë Environment</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li><code>GEMINI_API_KEY</code> - Google AI Studio key</li>
                        <li><code>Node.js 22+</code> - Runtime requirement</li>
                    </ul>
                </div>
            </div>
        </div>

        .section-card {
            background: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .info {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .warning {
            background: #fef3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 0.8rem;
            text-align: left;
        }

        th {
            background: #f8f8f8;
            font-weight: 600;
        }

        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin: 0.5rem 0;
        }

        footer {
            text-align: center;
            padding: 2rem;
            border-top: 2px solid #8b5cf6;
            margin-top: 3rem;
            color: #666;
        }

        footer a {
            color: #8b5cf6;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            pre {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="breadcrumb">
                <a href="./index.html">Developer Docs</a> > KautilyaAI Co-Pilot
            </div>
            <h1>ü§ñ KautilyaAI Co-Pilot Developer Guide</h1>
            <p>Complete implementation guide for the conversational CRUD system powered by Google Gemini 2.0 Flash</p>
        </header>

        <div class="info">
            <strong>Version 2.6.0 Feature:</strong> KautilyaAI Co-Pilot enables complete CRUD operations across all FinBuddy data types through natural language conversations with real-time UI synchronization.
        </div>

        <h2>üèóÔ∏è Architecture Overview</h2>

        <div class="section-card">
            <h3>System Components</h3>
            <p>The KautilyaAI Co-Pilot system consists of three main components:</p>
            
            <ol>
                <li><strong>Firebase Functions v2 Backend</strong> - Natural language processing and CRUD operations</li>
                <li><strong>Frontend React Integration</strong> - Real-time UI synchronization pipeline</li>
                <li><strong>Conversation Memory System</strong> - Context-aware interactions and smart references</li>
            </ol>

            <h4>Data Flow Pipeline</h4>
            <pre><code>User Input ‚Üí Firebase Functions ‚Üí AI Processing ‚Üí CRUD Operations ‚Üí ExecutedActions ‚Üí Frontend Callbacks ‚Üí UI Updates</code></pre>
        </div>

        <h2>üî• Firebase Functions v2 Implementation</h2>

        <div class="section-card">
            <h3>Function Configuration</h3>
            <p><strong>Location:</strong> <code>functions/src/index.ts</code></p>
            
            <pre><code>// Enhanced Firebase Functions v2 configuration
export const chatWithGemini = onRequest(
  {
    cors: true,                    // Enable cross-origin requests
    timeoutSeconds: 60,           // Extended timeout for AI processing
    memory: "1GiB",               // Increased memory for complex operations
    region: "us-central1"         // Optimal region for performance
  },
  async (request: Request, response: Response) => {
    try {
      // CORS headers for client compatibility
      response.set("Access-Control-Allow-Origin", "*");
      response.set("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
      response.set("Access-Control-Allow-Headers", "Content-Type, Authorization");

      if (request.method === "OPTIONS") {
        response.status(200).send();
        return;
      }

      // Extract conversation data and user context
      const { message, conversationId, userId, userContext } = request.body;
      
      // Process with enhanced parseAndExecuteActions
      const result = await parseAndExecuteActions(
        message, conversationId, userId, userContext
      );
      
      response.status(200).json({ 
        response: result.response,
        executedActions: result.executedActions 
      });
    } catch (error) {
      console.error("Chat function error:", error);
      response.status(500).json({ error: "Internal server error" });
    }
  }
);</code></pre>

            <h3>Advanced Natural Language Processing</h3>
            
            <h4>Smart Category Detection Patterns</h4>
            <pre><code>// 20+ sophisticated regex patterns for category detection
const categoryPatterns = [
  // Direct category creation commands
  /(?:add|create|new).*?(?:category|cat).*?(?:called|named|for)\s*["']?([^"'\n]+)["']?/i,
  
  // Category in quotes or explicit mentions
  /(?:category|cat).*?["']([^"']+)["']/i,
  
  // Natural "for [category]" patterns
  /for\s+([a-zA-Z\s]+?)(?:\s+category)?(?:\s|$)/i,
  
  // "in [category]" patterns  
  /in\s+([a-zA-Z\s]+?)(?:\s+category)?(?:\s|$)/i,
  
  // Expense amount patterns with category
  /‚Çπ?\s*\d+(?:\.\d{2})?\s+(?:for|in|on)\s+([a-zA-Z\s]+)/i,
  
  // "Add [amount] [category]" patterns
  /add.*?‚Çπ?\s*\d+.*?(?:for|in|on|to)\s+([a-zA-Z\s]+)/i,
  
  // Update/modify category patterns
  /(?:update|change|modify).*?category.*?(?:to|as)\s+["']?([^"'\n]+)["']?/i,
  
  // Delete category patterns
  /(?:delete|remove).*?(?:category|cat).*?["']?([^"'\n]+)["']?/i,
  
  // Template category patterns
  /(?:template|recurring).*?(?:for|in)\s+([a-zA-Z\s]+)/i,
  
  // Budget category patterns
  /(?:budget|limit).*?(?:for|in)\s+([a-zA-Z\s]+)/i,
  
  // More flexible patterns for various contexts
  /(?:spend|spent|expense).*?(?:on|for)\s+([a-zA-Z\s]+)/i,
  /([a-zA-Z\s]+)(?:\s+expenses?|\s+spending|\s+costs?)/i,
  
  // Casual conversation patterns
  /bought.*?(?:for|in)\s+([a-zA-Z\s]+)/i,
  /paid.*?(?:for|in)\s+([a-zA-Z\s]+)/i,
  
  // Category management patterns
  /set.*?category.*?(?:to|as)\s+["']?([^"'\n]+)["']?/i,
  /assign.*?category.*?["']?([^"'\n]+)["']?/i,
  
  // Amount-first patterns
  /‚Çπ\s*\d+.*?([a-zA-Z\s]+?)(?:\s+expense|\s+cost|\s+bill)?$/i,
  
  // Context-aware patterns
  /(?:this|that).*?(?:for|in)\s+([a-zA-Z\s]+)/i,
  
  // Compound patterns for complex sentences
  /(?:add|create).*?‚Çπ?\s*\d+.*?(?:expense|cost|bill).*?(?:for|in|on)\s+([a-zA-Z\s]+)/i,
  
  // Final fallback pattern
  /(?:^|\s)([a-zA-Z\s]{2,15})(?:\s+category|\s+expenses?|\s+spending)?(?:\s|$)/i
];

// Smart category mapping with common variations
const categoryMapping: { [key: string]: string } = {
  "food": "Food & Dining",
  "eat": "Food & Dining",
  "dining": "Food & Dining",
  "restaurant": "Food & Dining",
  "grocery": "Food & Dining",
  "groceries": "Food & Dining",
  
  "transport": "Transportation",
  "travel": "Transportation", 
  "commute": "Transportation",
  "taxi": "Transportation",
  "uber": "Transportation",
  "bus": "Transportation",
  "train": "Transportation",
  "metro": "Transportation",
  "flight": "Transportation",
  "fuel": "Transportation",
  "petrol": "Transportation",
  "gas": "Transportation",
  
  "education": "Education",
  "study": "Education",
  "course": "Education", 
  "book": "Education",
  "books": "Education",
  "tuition": "Education",
  "school": "Education",
  "college": "Education",
  "university": "Education",
  
  "entertainment": "Entertainment",
  "movie": "Entertainment",
  "movies": "Entertainment",
  "game": "Entertainment",
  "games": "Entertainment",
  "fun": "Entertainment",
  "party": "Entertainment",
  "concert": "Entertainment",
  "show": "Entertainment",
  
  "health": "Healthcare",
  "medical": "Healthcare",
  "doctor": "Healthcare",
  "medicine": "Healthcare",
  "hospital": "Healthcare",
  "pharmacy": "Healthcare",
  "gym": "Healthcare",
  "fitness": "Healthcare",
  
  "shopping": "Shopping",
  "clothes": "Shopping",
  "clothing": "Shopping",
  "accessories": "Shopping",
  "electronics": "Shopping",
  "gadgets": "Shopping",
  
  "bills": "Bills & Utilities",
  "utilities": "Bills & Utilities",
  "electricity": "Bills & Utilities",
  "water": "Bills & Utilities",
  "internet": "Bills & Utilities",
  "phone": "Bills & Utilities",
  "mobile": "Bills & Utilities",
  
  "rent": "Housing",
  "house": "Housing",
  "home": "Housing",
  "maintenance": "Housing",
  
  "coffee": "Food & Dining",
  "tea": "Food & Dining",
  "snacks": "Food & Dining",
  "lunch": "Food & Dining",
  "dinner": "Food & Dining",
  "breakfast": "Food & Dining"
};</code></pre>

            <h3>Conversation Memory System</h3>
            
            <pre><code>// Context-aware conversation memory
interface ConversationMemory {
  recentExpenses: Array<Expense & { id: string }>;
  recentBudgets: Array<Budget & { id: string }>;
  recentCategories: Array<{ name: string; id: string }>;
  lastOperations: Array<{
    type: 'expense' | 'budget' | 'category' | 'person' | 'template';
    action: 'create' | 'update' | 'delete';
    data: any;
    timestamp: string;
  }>;
}

const conversationMemory = new Map<string, ConversationMemory>();

// Initialize or get conversation memory
if (!conversationMemory.has(conversationId)) {
  conversationMemory.set(conversationId, {
    recentExpenses: [],
    recentBudgets: [],
    recentCategories: [],
    lastOperations: []
  });
}

const memory = conversationMemory.get(conversationId)!;

// Update memory after operations
const updateMemory = (type: string, action: string, data: any) => {
  memory.lastOperations.unshift({
    type: type as any,
    action: action as any,
    data,
    timestamp: new Date().toISOString()
  });
  
  // Keep only last 10 operations
  if (memory.lastOperations.length > 10) {
    memory.lastOperations.pop();
  }
};</code></pre>

            <h3>CRUD Operation Processing</h3>
            
            <h4>Expense Operations</h4>
            <pre><code>// Enhanced expense processing with smart categorization
const processExpenseOperations = async (message: string, userId: string) => {
  const executedActions: any = {};
  
  // Add expense with smart category detection
  const expenseMatch = message.match(/add.*?‚Çπ?(\d+(?:\.\d{2})?).*?(?:for|in|on)\s+(.+?)(?:\s|$)/i);
  if (expenseMatch) {
    const amount = parseFloat(expenseMatch[1]);
    let categoryText = expenseMatch[2]?.trim().toLowerCase();
    
    // Smart category mapping
    let category = categoryMapping[categoryText] || 
                   categoryText.charAt(0).toUpperCase() + categoryText.slice(1);
    
    // Clean up category name
    category = category.replace(/[^a-zA-Z\s&]/g, '').trim();
    
    const expense = {
      amount,
      category,
      description: `${category} expense`,
      date: new Date().toISOString().split('T')[0],
      createdAt: new Date().toISOString(),
      aiGenerated: true,
      conversationId
    };

    // Add to Firebase
    await addExpenseToFirestore(userId, expense);
    executedActions.addedExpense = expense;
    
    // Update conversation memory
    memory.recentExpenses.unshift({ ...expense, id: 'temp-id' });
    if (memory.recentExpenses.length > 10) memory.recentExpenses.pop();
    
    updateMemory('expense', 'create', expense);
  }
  
  // Update expense operations
  const updateMatch = message.match(/update.*?(?:last|recent)?\s*expense.*?(?:to|amount)\s*‚Çπ?(\d+(?:\.\d{2})?)/i);
  if (updateMatch && memory.recentExpenses.length > 0) {
    const newAmount = parseFloat(updateMatch[1]);
    const expenseToUpdate = memory.recentExpenses[0];
    
    const updates = { amount: newAmount };
    await updateExpenseInFirestore(userId, expenseToUpdate.id, updates);
    executedActions.updatedExpense = { id: expenseToUpdate.id, updates };
    
    updateMemory('expense', 'update', { id: expenseToUpdate.id, updates });
  }
  
  // Delete expense with context awareness
  const deleteMatch = message.match(/delete.*?(?:last|recent)?\s*(.+?)(?:\s+expense)?/i);
  if (deleteMatch) {
    const targetCategory = deleteMatch[1]?.trim().toLowerCase();
    let expenseToDelete = null;
    
    if (targetCategory === 'expense' || targetCategory === 'last' || targetCategory === 'recent') {
      // Delete most recent expense
      expenseToDelete = memory.recentExpenses[0];
    } else {
      // Find expense by category
      const mappedCategory = categoryMapping[targetCategory] || targetCategory;
      expenseToDelete = memory.recentExpenses.find(exp => 
        exp.category.toLowerCase().includes(mappedCategory.toLowerCase())
      );
    }
    
    if (expenseToDelete) {
      await deleteExpenseFromFirestore(userId, expenseToDelete.id);
      executedActions.deletedExpense = expenseToDelete;
      
      // Remove from memory
      const index = memory.recentExpenses.findIndex(exp => exp.id === expenseToDelete.id);
      if (index > -1) memory.recentExpenses.splice(index, 1);
      
      updateMemory('expense', 'delete', expenseToDelete);
    }
  }
  
  return executedActions;
};</code></pre>

            <h4>Category Operations</h4>
            <pre><code>// Category creation and management
const processCategoryOperations = async (message: string, userId: string) => {
  const executedActions: any = {};
  
  // Create new category
  const createMatch = message.match(/(?:add|create|new).*?category.*?(?:called|named)\s*["']?([^"'\n]+)["']?/i);
  if (createMatch) {
    const categoryName = createMatch[1].trim();
    const category = {
      name: categoryName,
      userId,
      createdAt: new Date().toISOString(),
      aiGenerated: true
    };
    
    await addCategoryToFirestore(category);
    executedActions.addedCategory = category;
    
    memory.recentCategories.unshift({ name: categoryName, id: 'temp-id' });
    updateMemory('category', 'create', category);
  }
  
  // Delete category
  const deleteMatch = message.match(/(?:delete|remove).*?category.*?["']?([^"'\n]+)["']?/i);
  if (deleteMatch) {
    const categoryName = deleteMatch[1].trim();
    
    await deleteCategoryFromFirestore(userId, categoryName);
    executedActions.deletedCategory = { name: categoryName };
    
    updateMemory('category', 'delete', { name: categoryName });
  }
  
  return executedActions;
};</code></pre>

            <h4>Budget Operations</h4>
            <pre><code>// Budget creation and management
const processBudgetOperations = async (message: string, userId: string) => {
  const executedActions: any = {};
  
  // Set new budget
  const setBudgetMatch = message.match(/set.*?‚Çπ?(\d+(?:\.\d{2})?).*?budget.*?(?:for|in)\s+(.+?)(?:\s|$)/i);
  if (setBudgetMatch) {
    const amount = parseFloat(setBudgetMatch[1]);
    let categoryText = setBudgetMatch[2]?.trim().toLowerCase();
    
    const category = categoryMapping[categoryText] || 
                    categoryText.charAt(0).toUpperCase() + categoryText.slice(1);
    
    const budget = {
      category,
      limit: amount,
      spent: 0,
      userId,
      createdAt: new Date().toISOString(),
      aiGenerated: true
    };
    
    await addBudgetToFirestore(budget);
    executedActions.addedBudget = budget;
    
    memory.recentBudgets.unshift({ ...budget, id: 'temp-id' });
    updateMemory('budget', 'create', budget);
  }
  
  // Update budget
  const updateBudgetMatch = message.match(/update.*?(.+?).*?budget.*?to.*?‚Çπ?(\d+(?:\.\d{2})?)/i);
  if (updateBudgetMatch) {
    const categoryText = updateBudgetMatch[1].trim().toLowerCase();
    const newAmount = parseFloat(updateBudgetMatch[2]);
    
    const category = categoryMapping[categoryText] || categoryText;
    const updates = { limit: newAmount };
    
    await updateBudgetInFirestore(userId, category, updates);
    executedActions.updatedBudget = { category, updates };
    
    updateMemory('budget', 'update', { category, updates });
  }
  
  return executedActions;
};</code></pre>
        </div>

        <h2>‚öõÔ∏è Frontend Integration</h2>

        <div class="section-card">
            <h3>React Component Integration</h3>
            <p><strong>Location:</strong> <code>src/components/GeminiChat.tsx</code></p>
            
            <h4>Complete CRUD Interface</h4>
            <pre><code>// Comprehensive CRUD callback props
interface GeminiChatProps {
  // Expense operations
  onAddExpense: (expense: Omit&lt;Expense, 'id'&gt;) => Promise&lt;void&gt;;
  onUpdateExpense: (id: string, updates: Partial&lt;Expense&gt;) => Promise&lt;void&gt;;
  onDeleteExpense: (id: string) => Promise&lt;void&gt;;
  
  // Budget operations
  onAddBudget: (budget: Omit&lt;Budget, 'id'&gt;) => Promise&lt;void&gt;;
  onUpdateBudget: (id: string, updates: Partial&lt;Budget&gt;) => Promise&lt;void&gt;;
  onDeleteBudget: (id: string) => Promise&lt;void&gt;;
  
  // Category operations
  onAddCategory: (category: Omit&lt;CustomCategory, 'id'&gt;) => Promise&lt;void&gt;;
  onDeleteCategory: (id: string) => Promise&lt;void&gt;;
  
  // People operations
  onAddPerson: (person: Omit&lt;Person, 'id'&gt;) => Promise&lt;void&gt;;
  onUpdatePerson: (id: string, updates: Partial&lt;Person&gt;) => Promise&lt;void&gt;;
  onDeletePerson: (id: string) => Promise&lt;void&gt;;
  
  // Template operations
  onAddTemplate: (template: Omit&lt;RecurringTemplate, 'id'&gt;) => Promise&lt;void&gt;;
  onDeleteTemplate: (id: string) => Promise&lt;void&gt;;
  
  // User context for AI processing
  userContext?: {
    expenses: Expense[];
    budgets: Budget[];
    categories: CustomCategory[];
    people: Person[];
    templates: RecurringTemplate[];
  };
}</code></pre>

            <h3>ExecutedActions Processing Pipeline</h3>
            
            <pre><code>// Real-time UI synchronization system
const handleExecutedActions = async (executedActions: any) => {
  try {
    // Expense operations with immediate UI updates
    if (executedActions.addedExpense) {
      await onAddExpense(executedActions.addedExpense);
      toast.success(`Added expense: ‚Çπ${executedActions.addedExpense.amount} for ${executedActions.addedExpense.category}`, {
        duration: 4000,
        icon: 'üí∞'
      });
    }

    if (executedActions.updatedExpense) {
      await onUpdateExpense(executedActions.updatedExpense.id, executedActions.updatedExpense.updates);
      toast.success("Expense updated successfully", {
        duration: 3000,
        icon: '‚úèÔ∏è'
      });
    }

    if (executedActions.deletedExpense) {
      await onDeleteExpense(executedActions.deletedExpense.id);
      toast.success("Expense deleted successfully", {
        duration: 3000,
        icon: 'üóëÔ∏è'
      });
    }

    // Category operations with instant UI reflection
    if (executedActions.addedCategory) {
      await onAddCategory(executedActions.addedCategory);
      toast.success(`Created category: ${executedActions.addedCategory.name}`, {
        duration: 4000,
        icon: 'üè∑Ô∏è'
      });
    }

    if (executedActions.deletedCategory) {
      await onDeleteCategory(executedActions.deletedCategory.id);
      toast.success("Category deleted successfully", {
        duration: 3000,
        icon: 'üóëÔ∏è'
      });
    }

    // Budget operations with real-time tracking
    if (executedActions.addedBudget) {
      await onAddBudget(executedActions.addedBudget);
      toast.success(`Created budget: ‚Çπ${executedActions.addedBudget.limit} for ${executedActions.addedBudget.category}`, {
        duration: 4000,
        icon: 'üí≥'
      });
    }

    if (executedActions.updatedBudget) {
      await onUpdateBudget(executedActions.updatedBudget.id, executedActions.updatedBudget.updates);
      toast.success("Budget updated successfully", {
        duration: 3000,
        icon: 'üìä'
      });
    }

    if (executedActions.deletedBudget) {
      await onDeleteBudget(executedActions.deletedBudget.id);
      toast.success("Budget deleted successfully", {
        duration: 3000,
        icon: 'üóëÔ∏è'
      });
    }

    // People management operations
    if (executedActions.addedPerson) {
      await onAddPerson(executedActions.addedPerson);
      toast.success(`Added person: ${executedActions.addedPerson.name}`, {
        duration: 4000,
        icon: 'üë§'
      });
    }

    if (executedActions.updatedPerson) {
      await onUpdatePerson(executedActions.updatedPerson.id, executedActions.updatedPerson.updates);
      toast.success("Person updated successfully", {
        duration: 3000,
        icon: '‚úèÔ∏è'
      });
    }

    if (executedActions.deletedPerson) {
      await onDeletePerson(executedActions.deletedPerson.id);
      toast.success("Person removed successfully", {
        duration: 3000,
        icon: 'üóëÔ∏è'
      });
    }

    // Template operations
    if (executedActions.addedTemplate) {
      await onAddTemplate(executedActions.addedTemplate);
      toast.success(`Created template: ${executedActions.addedTemplate.description}`, {
        duration: 4000,
        icon: 'üìã'
      });
    }

    if (executedActions.updatedTemplate) {
      const { field, value } = executedActions.updatedTemplate;
      toast.success(`Updated template ${field} to: ${value}`, {
        duration: 3000,
        icon: '‚úèÔ∏è'
      });
    }

    if (executedActions.deletedTemplate) {
      await onDeleteTemplate(executedActions.deletedTemplate.id);
      toast.success("Template deleted successfully", {
        duration: 3000,
        icon: 'üóëÔ∏è'
      });
    }

  } catch (error) {
    console.error('Error executing actions:', error);
    toast.error('Failed to execute some operations. Please try again.', {
      duration: 5000,
      icon: '‚ö†Ô∏è'
    });
  }
};</code></pre>

            <h3>App Integration</h3>
            <p><strong>Location:</strong> <code>src/App.tsx</code></p>
            
            <pre><code>// Complete CRUD callback integration in main app
&lt;GeminiChat
  // Expense operations
  onAddExpense={addExpense}
  onUpdateExpense={updateExpense}
  onDeleteExpense={deleteExpense}
  
  // Budget operations
  onAddBudget={addBudget}
  onUpdateBudget={updateBudget}
  onDeleteBudget={deleteBudget}
  
  // Category operations
  onAddCategory={addCategory}
  onDeleteCategory={deleteCategory}
  
  // People operations
  onAddPerson={addPerson}
  onUpdatePerson={updatePerson}
  onDeletePerson={deletePerson}
  
  // Template operations
  onAddTemplate={addTemplate}
  onDeleteTemplate={deleteTemplate}
  
  // User context for AI processing
  userContext={{
    expenses,
    budgets,
    categories: [...customCategories, ...publicCategories],
    people: [...customPeople, ...publicPeople],
    templates
  }}
/&gt;</code></pre>
        </div>

        <h2>üöÄ Deployment & Testing</h2>

        <div class="section-card">
            <h3>Firebase Functions Deployment</h3>
            
            <h4>Deploy Enhanced Functions</h4>
            <pre><code># Deploy only the functions
firebase deploy --only functions

# Deploy with specific project
firebase deploy --only functions --project your-project-id

# Deploy with environment variables
firebase functions:config:set gemini.api_key="your-api-key"
firebase deploy --only functions</code></pre>

            <h3>Testing Strategy</h3>
            
            <h4>Manual Testing Commands</h4>
            <pre><code>// Test basic expense creation
"Add ‚Çπ500 for education"
"Add 200 rupees for coffee"
"Create expense of ‚Çπ1000 for groceries"

// Test category management
"Create a new category called Transportation"
"Add category named Entertainment"
"Delete the Shopping category"

// Test budget operations
"Set ‚Çπ5000 budget for food"
"Create budget of ‚Çπ2000 for entertainment"
"Update food budget to ‚Çπ3000"

// Test context-aware operations
"Add ‚Çπ100 for lunch"
"Update my last expense to ‚Çπ150"
"Delete the last food expense"

// Test people and templates
"Add person John for shared expenses"
"Create template for monthly rent ‚Çπ15000"
"Update rent template amount to ‚Çπ16000"</code></pre>

            <h4>Error Testing</h4>
            <pre><code>// Test ambiguous commands
"Add money for stuff"
"Delete something"
"Update the thing"

// Test malformed inputs
"‚Çπ‚Çπ‚Çπ500 for @#$%"
"Create budget negative amount"
"Delete non-existent category"</code></pre>
        </div>

        <h2>‚ö° Performance Optimization</h2>

        <div class="section-card">
            <h3>Response Time Improvements</h3>
            
            <ul>
                <li><strong>Regex Optimization</strong>: Ordered patterns by frequency for faster matching</li>
                <li><strong>Memory Caching</strong>: Conversation context cached for quick access</li>
                <li><strong>Parallel Processing</strong>: Multiple operations processed simultaneously</li>
                <li><strong>Smart Fallbacks</strong>: Quick responses for common patterns</li>
            </ul>

            <h3>Error Recovery</h3>
            
            <pre><code>// Graceful error handling with user feedback
try {
  const result = await processOperations(message, userId);
  return { success: true, result };
} catch (error) {
  console.error('Operation failed:', error);
  
  // Attempt smart recovery
  if (error.code === 'category-not-found') {
    return {
      success: false,
      suggestion: "Would you like me to create that category first?"
    };
  }
  
  return {
    success: false,
    message: "I couldn't process that request. Could you rephrase it?"
  };
}</code></pre>
        </div>

        <h2>üîí Security Considerations</h2>

        <div class="section-card">
            <h3>Data Protection</h3>
            
            <ul>
                <li><strong>User Context Isolation</strong>: Each user's data strictly separated</li>
                <li><strong>Input Sanitization</strong>: All user inputs cleaned and validated</li>
                <li><strong>API Key Security</strong>: Environment variables for sensitive data</li>
                <li><strong>Rate Limiting</strong>: Function-level rate limiting to prevent abuse</li>
            </ul>

            <h3>Firebase Security Rules</h3>
            
            <pre><code>// Enhanced security rules for AI operations
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // AI-generated content validation
    match /users/{userId}/expenses/{expenseId} {
      allow write: if request.auth != null && 
        request.auth.uid == userId &&
        // Validate AI-generated fields
        (!resource.data.keys().hasAny(['aiGenerated']) ||
         request.resource.data.aiGenerated is bool);
    }
    
    // Rate limiting for AI operations
    match /aiUsage/{userId} {
      allow read, write: if request.auth != null && 
        request.auth.uid == userId;
    }
  }
}</code></pre>
        </div>

        <div class="success">
            <strong>‚úÖ Implementation Complete:</strong> KautilyaAI Co-Pilot is fully operational with comprehensive CRUD capabilities, real-time UI synchronization, and context-aware conversation memory.
        </div>

        <footer>
            <p>
                <a href="./index.html">‚Üê Back to Developer Docs</a> | 
                <a href="./firebase.html">Firebase Integration ‚Üí</a> |
                <a href="../docs/kautilyaai-guide.html">User Guide</a>
            </p>
            <p>&copy; 2025 FinBuddy with KautilyaAI Developer Documentation | 
               Last Updated: August 25, 2025 | Version 2.6.0 - KautilyaAI Revolution | 
               <span style="color: #8b5cf6;">ü§ñ Ancient Wisdom meets Modern AI</span>
            </p>
        </footer>
    </div>
</body>
</html>
